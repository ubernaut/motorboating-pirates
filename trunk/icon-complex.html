<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Complex Icons</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="jquery-1.5.2.min.js"></script>
<script type="text/javascript" src="jquery.rotate.1-1.js"></script>
<script type="text/javascript">
function initialize() {
  var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(-33.9, 151.2),
    mapTypeId: google.maps.MapTypeId.TERRAIN
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"),
                                myOptions);

  setMarkers(map, beaches);
}
var beaches = [
  ['Bondi Beach', -33.890542, 151.274856, 4]
];
function setMarkers(map, beach) {
  var image = new google.maps.MarkerImage('typhoon0.png',
      new google.maps.Size(250, 250),
      new google.maps.Point(0, 0),
      new google.maps.Point(125, 125));

  
  var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
  marker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      icon: image,
      title: beach[0]
  });
  
}
$(document).ready(function() {
    // put all your jQuery goodness in here.
   BoatOrient=0;
});
function rotBoat(){	
	BoatOrient=BoatOrient%8;
	var boatpath='typhoon'+BoatOrient.toString()+'.png';
/*	alert(boatpath);
	var image = new google.maps.MarkerImage(boatpath,
		new google.maps.Size(250, 250),
		new google.maps.Point(0, 0),
		new google.maps.Point(125, 125));
	 var marker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      icon: image,
      title: beach[0]
  });*/
	$('.boat').attr('src',boatpath);
}
function handleKeyDown(keyCode){
	//alert(keyCode);
	if(keyCode==65){
		//rotate ccw
		BoatOrient++;
		rotBoat();
	}
	if(keyCode==68){
		//rotate cw
		BoatOrient--;
		rotBoat();
	}
}
function handleKeyUp(keyCode){
	
	//alert(keyCode);
}

</script>
</head>
<body onload="initialize()" onkeydown="handleKeyDown(event.keyCode);" onkeyup="handleKeyUp(event.keyCode);">

  <div id="amap_canvas" style="width:100%; height:66%">
	
  </div>
 
  <div id="controlDiv" style="width:100%; height:33%">
	
	<img src="typhoon0.png" class="boat" onclick="handleKeyDown(65);">
  </div>
</body>
</html>
